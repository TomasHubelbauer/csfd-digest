(window.webpackJsonpcra=window.webpackJsonpcra||[]).push([[0],{14:function(e,t,n){},17:function(e,t,n){"use strict";n.r(t);n(8);var a=n(0),r=n.n(a),c=n(4),l=n(2),u=n.n(l),i=n(5),s=n(1),o=(n(14),n(6)),m=n.n(o);Object(c.render)(r.a.createElement((function(){var e=Object(a.useState)(new Date),t=Object(s.a)(e,2),n=t[0],c=t[1],l=Object(a.useState)([]),o=Object(s.a)(l,2),d=o[0],f=o[1],p=Object(a.useState)(localStorage.getItem("selected-cinemas")?JSON.parse(localStorage.getItem("selected-cinemas")):[]),b=Object(s.a)(p,2),g=b[0],h=b[1],v=Object(a.useState)([]),E=Object(s.a)(v,2),O=E[0],j=E[1],S=Object(a.useState)(),k=Object(s.a)(S,2),w=k[0],y=k[1];Object(a.useEffect)((function(){Object(i.a)(u.a.mark((function e(){var t,n,a,r,l;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,fetch("../data/index.json");case 3:return t=e.sent,e.next=6,t.json();case 6:n=e.sent,a=n.dateAndTime,r=n.cinemas,(l=n.movies).sort((function(e,t){return t.screenings-e.screenings})),c(new Date(a)),f(r),j(l),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),y(e.t0);case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))()}),[]);var x=function(e){var t=g.filter((function(t){return t!==e.currentTarget.dataset.id}));h(t),localStorage.setItem("selected-cinemas",JSON.stringify(t))},N=function(e){var t=g.filter((function(t){return t!==e.currentTarget.dataset.id}));t.push(e.currentTarget.dataset.id),h(t),localStorage.setItem("selected-cinemas",JSON.stringify(t))};if(w)return r.a.createElement("div",null,w.toString());var T=g.map((function(e){return d.indexOf(e)})),I=g,J=d.filter((function(e){return!I.includes(e)})),C=O.filter((function(e){return!e.cinemas})),H=O.filter((function(e){return!C.includes(e)})).filter((function(e){return e.cinemas.find((function(e){return T.includes(e)}))}));return r.a.createElement("div",null,r.a.createElement("h1",null,"Prague Cinema"),r.a.createElement("p",null,"Built by",r.a.createElement("img",{alt:"",src:"https://hubelbauer.net/favicon.ico"}),r.a.createElement("a",{href:"https://hubelbauer.net",target:"_blank",rel:"noopener noreferrer"},"Tomas Hubelbauer"),".",r.a.createElement("a",{href:"https://github.com/TomasHubelbauer/puppeteer-csfd-scraper",target:"_blank",rel:"noopener noreferrer"},"GitHub")),C.length>0&&r.a.createElement("div",null,"Some movies weren't scraped correctly: ",C.map((function(e){return"".concat(e.name," (").concat(e.year,")")})).join(", ")),r.a.createElement("div",{className:"included"},I.map((function(e){return r.a.createElement("button",{key:e,"data-id":e,onClick:x},e)}))),r.a.createElement("div",{className:"excluded"},J.map((function(e){return r.a.createElement("button",{key:e,"data-id":e,onClick:N},e)}))),r.a.createElement("p",null,g.length," cinema",g.length>1?"s":""," selected"),r.a.createElement("p",null,H.length," (",O.length,") movies: (last updated\xa0",r.a.createElement(m.a,{date:n}),")"),H.map((function(e){return r.a.createElement("div",{className:"cinema",key:e.id},r.a.createElement("img",{alt:"".concat(e.name," poster"),src:e.posterUrl+"?h360"}),e.name)})))}),null),document.getElementById("root"))},7:function(e,t,n){e.exports=n(17)},8:function(e,t,n){}},[[7,1,2]]]);
//# sourceMappingURL=main.4f03748d.chunk.js.map